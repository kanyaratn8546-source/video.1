<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INNOVATION 2026 | HIGH-TECH SHOWCASE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@200;300;400;600;700;800&family=Rajdhani:wght@400;600;700&family=Kanit:wght@300;400;600;700;900&family=Electrolize&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-void: #000000;
            --bg-deep: #05080a;
            --grid-cyan: rgba(0, 255, 255, 0.08);
            --accent-cyan: #00ffff;
            --accent-pink: #ff00ff;
            --accent-green: #00ff00;
            --accent-orange: #ff6600;
            --text-bright: #e0faff;
            
            --font-display: 'Electrolize', sans-serif;
            --font-thai: 'Kanit', sans-serif;
            --font-code: 'Rajdhani', monospace;
            
            /* 4:5 Aspect Ratio (80x100cm) */
            --img-w: min(24vw, 360px); 
            --img-h: calc(var(--img-w) * 1.25);
            
            --center-w: min(12vw, 200px);
            --center-h: min(15vw, 250px);
            
            --creator-w: min(32vw, 480px);
            --creator-h: calc(var(--creator-w) * 1.25);

            --glow-strong: 0 0 25px rgba(0, 255, 255, 0.5), 0 0 50px rgba(0, 255, 255, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--bg-void);
            color: var(--text-bright);
            font-family: var(--font-thai);
            overflow: hidden;
            width: 100vw; height: 100vh;
        }

        /* Background effects */
        body::before {
            content: ''; position: fixed; inset: 0;
            background-image: linear-gradient(var(--grid-cyan) 1px, transparent 1px), linear-gradient(90deg, var(--grid-cyan) 1px, transparent 1px);
            background-size: 40px 40px; opacity: 0.5; pointer-events: none; z-index: 1;
        }

        body::after {
            content: ''; position: fixed; inset: 0;
            background: linear-gradient(to bottom, transparent 50%, rgba(0, 255, 255, 0.02) 50%);
            background-size: 100% 4px; animation: scanlines 8s linear infinite;
            pointer-events: none; z-index: 2;
        }

        @keyframes scanlines { from { transform: translateY(0); } to { transform: translateY(4px); } }

        /* Start Screen */
        #start-screen {
            position: fixed; inset: 0; background: var(--bg-void); z-index: 15000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        #start-btn {
            background: rgba(0, 255, 255, 0.05); border: 2px solid var(--accent-cyan); color: var(--accent-cyan);
            padding: 20px 60px; font-size: 1.2rem; letter-spacing: 10px; cursor: pointer;
            font-family: var(--font-display); font-weight: 900; transition: all 0.4s;
            box-shadow: var(--glow-strong); text-transform: uppercase;
        }
        #start-btn:not(:disabled):hover { background: var(--accent-cyan); color: #000; box-shadow: 0 0 80px var(--accent-cyan); }
        #start-btn:disabled { opacity: 0.3; cursor: wait; }

        /* Photo HUD Styling */
        .photo-frame {
            position: relative; overflow: hidden; border: 2px solid rgba(0, 255, 255, 0.5);
            box-shadow: var(--glow-strong); background: #000;
        }
        
        .scan-bar {
            position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(to right, transparent, var(--accent-cyan), transparent);
            box-shadow: 0 0 15px var(--accent-cyan); z-index: 5;
            animation: scanMove 3s ease-in-out infinite;
            pointer-events: none; opacity: 0.7;
        }
        @keyframes scanMove { 0% { top: 0%; opacity: 0; } 10%, 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

        /* Slot Machine Stage */
        #draw-stage {
            position: fixed; inset: 0; z-index: 8000; display: flex; justify-content: center; align-items: center;
            background: #000; opacity: 0; visibility: hidden;
        }
        .draw-grid { display: flex; align-items: center; gap: clamp(30px, 5vw, 60px); perspective: 1000px; }
        
        .side-box { width: var(--img-w); height: var(--img-h); }
        .side-box img { width: 100%; height: 100%; object-fit: cover; filter: brightness(1.1) contrast(1.1); }

        .side-label {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green));
            color: #000; font-size: 10px; text-align: center; font-weight: 900; padding: 6px 0;
            font-family: var(--font-code); letter-spacing: 2px; z-index: 10;
        }

        /* Improved Center Scouter */
        .center-scouter { position: relative; width: var(--center-w); height: var(--center-h); }
        .scouter-corner { position: absolute; width: 25px; height: 25px; border: 3px solid var(--accent-green); z-index: 15; }
        .sc-tl { top: -10px; left: -10px; border-right: none; border-bottom: none; }
        .sc-tr { top: -10px; right: -10px; border-left: none; border-bottom: none; }
        .sc-bl { bottom: -10px; left: -10px; border-right: none; border-top: none; }
        .sc-br { bottom: -10px; right: -10px; border-left: none; border-top: none; }

        /* Lock Target Bracket - Appears when spin stops */
        #lock-bracket {
            position: absolute; inset: -5px; border: 2px solid var(--accent-pink);
            z-index: 14; opacity: 0; pointer-events: none; border-radius: 10px;
            box-shadow: 0 0 20px var(--accent-pink);
        }

        .center-counter {
            width: 100%; height: 100%; background: rgba(0, 15, 30, 0.95);
            border: 2px solid var(--accent-cyan); overflow: hidden; position: relative; border-radius: 12px;
            box-shadow: inset 0 0 40px rgba(0, 255, 255, 0.5), 0 0 30px rgba(0, 255, 255, 0.2);
        }
        
        /* CRT overlay for scouter */
        .center-counter::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(transparent 50%, rgba(0, 255, 255, 0.05) 50%);
            background-size: 100% 4px; z-index: 5; pointer-events: none;
        }
        /* Top/Bottom Vignette to hide entering/exiting numbers */
        .center-counter::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(to bottom, #000 0%, transparent 15%, transparent 85%, #000 100%);
            z-index: 6; pointer-events: none;
        }

        /* Scrolling Hex Data for atmosphere */
        .hex-data {
            position: absolute; left: 8px; top: 0; font-family: var(--font-code);
            font-size: 9px; color: var(--accent-green); opacity: 0.3; z-index: 4;
            display: flex; flex-direction: column; line-height: 1.2;
        }

        .number-track { 
            display: flex; flex-direction: column; width: 100%; 
            will-change: transform; transition: filter 0.2s;
        }
        .number-item {
            width: 100%; height: var(--center-h); flex-shrink: 0; display: flex;
            align-items: center; justify-content: center; font-size: 4rem; font-weight: 900;
            color: var(--accent-cyan); font-family: var(--font-display); 
            text-shadow: 0 0 20px var(--accent-cyan), 0 0 40px rgba(0, 255, 255, 0.5);
            letter-spacing: -2px;
        }

        /* Project Scenes */
        .scene {
            position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; background: var(--bg-void);
        }
        .content-layout {
            display: flex; gap: 60px; width: 95%; max-width: 1600px; align-items: center;
        }
        @media (max-width: 1024px) { .content-layout { flex-direction: column; padding-top: 100px; overflow-y: auto; } }

        .creator-box { width: var(--creator-w); height: var(--creator-h); }
        .creator-inner { width: 100%; height: 100%; overflow: hidden; }
        .creator-inner img { width: 100%; height: 100%; object-fit: cover; }
        
        .node-tag {
            position: absolute; top: -15px; left: 20px; background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green));
            color: #000; font-family: var(--font-code); font-size: 12px; font-weight: 900; padding: 5px 15px; z-index: 12;
            box-shadow: 0 0 15px var(--accent-cyan);
        }

        /* Info Panel */
        .info-panel { flex: 1; }
        .title-punch {
            font-size: clamp(2.2rem, 5vw, 4.5rem); font-weight: 900; color: #fff; font-family: var(--font-display);
            text-shadow: 3px 3px 0 var(--accent-cyan), 5px 5px 0 var(--accent-pink); margin-bottom: 12px;
        }
        .subtitle-thai {
            font-family: var(--font-thai); color: var(--accent-green); font-size: 1.3rem;
            padding: 8px 25px; border-left: 6px solid var(--accent-green); background: rgba(0, 255, 0, 0.08);
            margin-bottom: 25px; display: inline-block;
        }
        .info-section { margin-bottom: 22px; opacity: 0; transform: translateX(-30px); }
        .section-title {
            color: var(--accent-cyan); font-family: var(--font-display); font-size: 1.3rem;
            margin-bottom: 8px; display: flex; align-items: center; gap: 15px; font-weight: 700;
        }
        .section-title::after { content: ''; flex: 1; height: 1px; background: rgba(0, 255, 255, 0.2); }
        .info-list li { color: #ccc; margin-bottom: 6px; list-style: none; padding-left: 25px; position: relative; }
        .info-list li::before { content: '◆'; position: absolute; left: 0; color: var(--accent-pink); }
        .creator-tag { background: rgba(0, 255, 255, 0.1); border: 1px solid var(--accent-cyan); padding: 5px 15px; color: var(--accent-cyan); border-radius: 4px; font-size: 1rem; }

        /* Navigation Controls */
        .nav-controls { position: fixed; bottom: 9vh; right: 40px; z-index: 10000; display: flex; gap: 20px; }
        .nav-btn {
            background: rgba(0, 255, 255, 0.05); border: 2px solid var(--accent-cyan); color: var(--accent-cyan);
            width: 75px; height: 75px; cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-family: var(--font-code); font-weight: 900; font-size: 1.2rem; transition: 0.3s;
            backdrop-filter: blur(10px);
        }
        .nav-btn:hover { background: var(--accent-cyan); color: #000; box-shadow: 0 0 30px var(--accent-cyan); transform: translateY(-3px); }

        /* Final Showcase */
        #poster-showcase { background: #000; }
        #poster-carousel-container { display: flex; gap: 70px; padding: 0 150px; height: 100%; align-items: center; }
        .showcase-poster-item { flex-shrink: 0; height: 82vh; aspect-ratio: 4/5; border: 2px solid var(--accent-cyan); overflow: hidden; background: #05080a; box-shadow: 0 0 50px rgba(0, 255, 255, 0.3); }
        .showcase-poster-item img { width: 100%; height: 100%; object-fit: contain; background: #000; }

        /* HUD Utils */
        .hud-frame { position: fixed; inset: 0; z-index: 9000; pointer-events: none; padding: 30px; }
        .hud-line { position: absolute; width: 50px; height: 50px; border: 2px solid var(--accent-cyan); opacity: 0.4; }
        .tl { top: 30px; left: 30px; border-right: none; border-bottom: none; }
        .tr { top: 30px; right: 30px; border-left: none; border-bottom: none; }
        .bl { bottom: 30px; left: 30px; border-right: none; border-top: none; }
        .br { bottom: 30px; right: 30px; border-left: none; border-top: none; }
        .impact-flash { position: fixed; inset: 0; background: #fff; z-index: 11000; opacity: 0; pointer-events: none; }
        
        .img-wrapper { width: 100%; height: 100%; position: relative; }
    </style>
</head>
<body>

    <audio id="bgm-audio" loop crossorigin="anonymous"></audio>

    <div id="start-screen">
        <div style="font-family:var(--font-code); color:var(--accent-cyan); letter-spacing:12px; margin-bottom:30px; font-size: 1.1rem;">CORE_SYSTEM_INIT_2026</div>
        <button id="start-btn" disabled>STANDBY...</button>
    </div>

    <div class="impact-flash" id="flash"></div>

    <div class="hud-frame">
        <div class="hud-line tl"></div><div class="hud-line tr"></div>
        <div class="hud-line bl"></div><div class="hud-line br"></div>
        <div style="display:flex; justify-content:space-between; font-family:var(--font-code); color:var(--accent-cyan); font-size:14px; opacity:0.7; letter-spacing: 3px; font-weight: 700;">
            <div id="status-text">SYSTEM: OPTIMIZED</div>
            <div id="hud-timer">00:00:00</div>
        </div>
    </div>

    <!-- Navigation HUD -->
    <div class="nav-controls">
        <button class="nav-btn" onclick="navPrev()">PREV</button>
        <button class="nav-btn" onclick="navNext()">NEXT</button>
    </div>

    <!-- Cinematic Letterbox -->
    <div style="position:fixed; top:0; width:100%; height:8vh; background:linear-gradient(to bottom, #000, transparent); z-index:9500; pointer-events:none;"></div>
    <div style="position:fixed; bottom:0; width:100%; height:8vh; background:linear-gradient(to top, #000, transparent); z-index:9500; pointer-events:none;"></div>

    <div id="draw-stage">
        <div class="draw-grid">
            <div class="side-box photo-frame" id="box-l"></div>
            <div class="center-scouter">
                <div class="scouter-corner sc-tl"></div><div class="scouter-corner sc-tr"></div>
                <div class="scouter-corner sc-bl"></div><div class="scouter-corner sc-br"></div>
                <div id="lock-bracket"></div>
                <div class="center-counter">
                    <div class="hex-data" id="hex-stream"></div>
                    <div class="number-track" id="num-track"></div>
                </div>
            </div>
            <div class="side-box photo-frame" id="box-r"></div>
        </div>
    </div>

    <div id="camera-rig">
        <div class="scene" id="poster-showcase">
            <div id="poster-carousel-container"></div>
        </div>
        <div class="scene" id="outro">
            <div class="slide-container" id="slide-container">
                <div class="slide-item">
                    <div class="title-punch" style="font-size: 6rem;">COMPLETE</div>
                    <div class="subtitle-thai">วิทยาลัยเทคนิคอำนาจเจริญ • INNOVATION 2026</div>
                </div>
                <div class="slide-item">
                    <div class="title-punch" style="font-size: 6rem; text-shadow: 3px 3px 0 var(--accent-pink), 5px 5px 0 var(--accent-cyan);">THANK YOU</div>
                    <div class="subtitle-thai" style="border-color: var(--accent-pink); color: var(--accent-pink);">ขอบคุณสำหรับการรับชมผลงาน</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const audioFiles = {
            bgm: "https://image2url.com/r2/default/videos/1770188444874-800b8249-5b6e-4bce-b759-cc0a1002957a.mp4",
            spin: "https://assets.mixkit.co/active_storage/sfx/2592/2592-preview.mp3",
            impact: "https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"
        };

        const projects = [
            { id: '1', title: "LAB ACCESS SYSTEM", sub: "1. การพัฒนาเว็บไซต์เข้าใช้ห้องปฏิบัติการคอมพิวเตอร์", img: "https://image2url.com/r2/default/files/1770270328767-4f665d1c-74e9-4ae6-b0c2-7f372a21abaf.png", creatorImg: "https://image2url.com/r2/default/files/1770269586586-ba8fd498-994c-4635-86f5-4a1f685eaa1e.png", creators: ["นางสาวดลลชา ตราทอง", "นางสาวดวงพร สิทธิจันทร์"], objectives: ["พัฒนาระบบดิจิทัลที่มีประสิทธิภาพ", "ศึกษาและประเมินประสิทธิภาพการใช้งาน"], benefits: ["ลดขั้นตอนเอกสารแบบเดิม", "เข้าถึงข้อมูลง่ายและเป็นระเบียบ"] },
            { id: '2', title: "BENWIRA BOOKING", sub: "2. การพัฒนาเว็บไซต์จองที่พัก BENWIRA", img: "https://image2url.com/r2/default/files/1770275641316-44e314b2-6431-49d3-aab6-a67617edaa25.png", creatorImg: "https://image2url.com/r2/default/files/1770275567233-2cdd4015-9532-41cb-b51f-a20b78061054.png", creators: ["นางสาวเบ็ญจมาภรณ์ อุ่นอ่อน", "นางสาววิภาลินี ภักดี"], objectives: ["ออกแบบเว็บไซต์จองคิวออนไลน์", "ศึกษาความพึงพอใจของผู้ใช้"], benefits: ["เพิ่มความสะดวกในการจองที่พัก", "จัดการฐานข้อมูล MySQL อย่างเป็นระบบ"] },
            { id: '3', title: "SMART EDUCATION", sub: "3. การพัฒนาระบบ Smart Education", img: "https://image2url.com/r2/default/files/1770270350191-9044493b-483f-495c-9c6a-178b44f0df68.png", creatorImg: "https://image2url.com/r2/default/files/1770276058060-bdbadc1a-7563-43e2-9a79-70963e8b86ce.png", creators: ["นายลิขิต ไไหลล้น", "นายสุวิจักขณ์ หงษ์ศาลา"], objectives: ["บันทึกเวลาเรียนและส่งงานออนไลน์", "ลดภาระการจัดเก็บไฟล์งาน"], benefits: ["ตรวจสอบสถานะงานได้ทันที", "ระบบจัดการข้อมูลรวดเร็วขึ้น"] },
            { id: '4', title: "COLLEGE PR MEDIA", sub: "4. การผลิตสื่อมัลติมีเดียประชาสัมพันธ์วิทยาลัย", img: "https://image2url.com/r2/default/files/1770278426552-d66b5a92-4c38-4729-86bc-76363cf139d8.png", creatorImg: "https://image2url.com/r2/default/files/1770276449008-aec8b66a-0518-4923-ad86-5a8ec6fe5866.png", creators: ["นางสาวชนัญธิดา สิมุฒิ", "นางสาวชไมพร รื่นเริง"], objectives: ["ผลิตสื่อ PR คุณภาพสูง", "ส่งเสริมภาพลักษณ์วิทยาลัย"], benefits: ["ผู้คนเข้าถึงข้อมูลได้น่าสนใจมากขึ้น", "กระจายข่าวสารอย่างมีประสิทธิภาพ"] },
            { id: '5', title: "ROYAL MOTION ART", sub: "5. การผลิตสื่อ Motion Art 70 ปีแห่งพระเมตตา", img: "https://image2url.com/r2/default/files/1770271583761-fc0daa93-045e-458a-a349-601e469c6c55.png", creatorImg: "https://image2url.com/r2/default/files/1770270006179-472e3176-ee83-44f3-9470-9b4d45430659.png", creators: ["นางสาวกัญญาภัค ศรีเสน", "นางสาวกัญญาณัฐ ศรีเสน"], objectives: ["ผลิตสื่อด้วย Canva ระดับมืออาชีพ", "ประเมินประสิทธิภาพสื่อ Motion Art"], benefits: ["พัฒนาทักษะด้าน Animation ขั้นสูง", "สื่อสารข้อมูลเชิงศิลป์ให้น่าประทับใจ"] },
            { id: '6', title: "UDOMSUK QUEUE", sub: "6. ระบบจองคิวร้านอาหารอุดมสุข", img: "https://image2url.com/r2/default/files/1770271649022-acfec717-4bb7-4f08-8337-7864cb700977.png", creatorImg: "https://image2url.com/r2/default/files/1770276635955-0156573d-15e4-424a-9f46-164f90f350d6.png", creators: ["นางสาวพิมพ์ลภัส เนินผา", "นางสาวอัมพร ขันทหัส"], objectives: ["ลดการรอคิวหน้าร้านอาหาร", "พัฒนาระบบหลังบ้านที่มีประสิทธิภาพ"], benefits: ["ลูกค้าจองคิวได้ล่วงหน้า", "ร้านบริหารจัดการโต๊ะได้แม่นยำ"] },
            { id: '7', title: "AI GREEN DIGITAL", sub: "7. สื่อ AI ต่อการส่งเสริม Green Digital", img: "https://image2url.com/r2/default/files/1770271787974-4eca9685-14c2-4e76-9516-d51acb07036f.png", creatorImg: "https://image2url.com/r2/default/files/1770276886657-45df596d-2803-43c9-a8a1-cbb7639d4d74.png", creators: ["นายภวพล เหมาะเจาะ", "นายนันทวัฒน์ หงษ์ทอง"], objectives: ["ใช้ AI สร้างสื่อแนวทาง Green Digital", "รณรงค์การใช้เทคโนโลยีที่เป็นมิตรต่อโลก"], benefits: ["สร้างความตระหนักด้านสิ่งแวดล้อม", "สาธิตการทำงานร่วมกับ AI"] },
            { id: '8', title: "2D MOTION GRAPHIC", sub: "8. Motion Graphic 2D แนะนำวิทยาลัย", img: "https://image2url.com/r2/default/files/1770271685605-e6944e59-794a-4024-851d-2a18ca0a2b49.png", creatorImg: "https://image2url.com/r2/default/files/1770277283240-43cdedf4-e529-413e-8d56-60a601637309.png", creators: ["นางสาวสุฑิตา ยิ่งยงสันต์", "นางสาวอภิญญา ชายทวีป"], objectives: ["แนะนำวิทยาลัยผ่านงานอนิเมชัน 2D", "ศึกษาพฤติกรรมการรับชมสื่อ"], benefits: ["สื่อทันสมัยและเข้าใจง่าย", "เพิ่มการรับรู้ถึงแผนกวิชาต่างๆ"] },
            { id: '9', title: "DENTAL CLINIC QUEUE", sub: "9. ระบบจองคิวคลินิกหมอฟันยิ้ม", img: "https://image2url.com/r2/default/files/1770271692165-9669c1da-888a-4388-b716-daa1d105182c.png", creatorImg: "https://image2url.com/r2/default/files/1770277672724-083212e2-b521-4792-8405-d6f2be853af7.png", creators: ["นางสาวพิมพรรณ จันเขียว", "นางสาวอรทัย ปาตะศรี"], objectives: ["พัฒนาการนัดหมายทันตกรรมออนไลน์", "ลดเวลาการรอคอยในคลินิก"], benefits: ["ผู้ป่วยนัดหมายได้ตลอด 24 ชม.", "คลินิกจัดการคิวได้เป็นระบบ"] },
            { id: '10', title: "RPG LEARNING GAME", sub: "10. สื่อการเรียนรู้รูปแบบเกม RPG", img: "https://image2url.com/r2/default/files/1770278221988-d0665551-c23f-43ec-9d06-9413aa45119a.png", creatorImg: "https://image2url.com/r2/default/files/1770278081373-a55557a6-16b7-4f14-8900-09845618e488.png", creators: ["นายอติคุณ บุญพุท", "นางสาวอรสา กิ่งแสง"], objectives: ["ใช้ Google AI พัฒนาเนื้อหาเกม", "ส่งเสริมการเรียนรู้แบบ Interactive"], benefits: ["นักเรียนมีความสุขกับการเรียน", "เพิ่มประสิทธิภาพการจำผ่านเกม"] },
            { id: '11', title: "NAIL SALON QUEUE", sub: "11. ระบบจองคิวร้านทำเล็บ", img: "https://image2url.com/r2/default/files/1770271707904-b2988bfb-bdc3-4a29-b55d-a4cbc52f2396.png", creatorImg: "https://image2url.com/r2/default/files/1770278169754-e0691ade-e822-442e-b48d-bc9fdf88331a.png", creators: ["นางสาวสุริษา หอมใจ", "นางสาวสุมิตรา สุภานิช"], objectives: ["บริหารตารางงานช่างทำเล็บ", "พัฒนาระบบจองที่ใช้งานง่าย"], benefits: ["ลดปัญหาคิวชนกัน", "ลูกค้าประทับใจในความเป็นมืออาชีพ"] }
        ];

        let bgmAudio = document.getElementById('bgm-audio');
        let masterTl = gsap.timeline({ paused: true });
        const sfx = {};
        let currentProjectIndex = 0;

        function init() {
            const track = document.getElementById('num-track');
            const rig = document.getElementById('camera-rig');
            const posterCarousel = document.getElementById('poster-carousel-container');
            const hexStream = document.getElementById('hex-stream');

            bgmAudio.src = audioFiles.bgm;
            sfx.spin = new Audio(audioFiles.spin);
            sfx.impact = new Audio(audioFiles.impact);

            // Populate Hex Data for UI busy-ness
            for(let h=0; h<30; h++) {
                const span = document.createElement('span');
                span.innerText = Math.random().toString(16).substr(2, 6).toUpperCase();
                hexStream.appendChild(span);
            }

            // Populate Number Track
            const spinValues = projects.map(p => p.id.padStart(2, '0'));
            for (let r = 0; r < 15; r++) {
                spinValues.forEach(val => {
                    const div = document.createElement('div');
                    div.className = 'number-item'; div.innerText = val;
                    track.appendChild(div);
                });
            }

            // Create Project Scenes
            projects.forEach((p) => {
                const div = document.createElement('div');
                div.className = 'scene'; div.id = `scene-${p.id}`;
                div.innerHTML = `
                    <div class="content-layout">
                        <div class="creator-box photo-frame">
                            <div class="node-tag">UNIT_0${p.id}_ACTIVE</div>
                            <div class="bracket-overlay"><div class="b-top"></div><div class="b-bottom"></div></div>
                            <div class="scan-bar"></div>
                            <div class="creator-inner"><img src="${p.creatorImg}"></div>
                        </div>
                        <div class="info-panel">
                            <div class="title-punch">${p.title}</div>
                            <div class="subtitle-thai">${p.sub}</div>
                            <div class="info-section"><div class="section-title">Team Creators</div><div class="creators-row">${p.creators.map(c=>`<div class="creator-tag">${c}</div>`).join('')}</div></div>
                            <div class="info-section"><div class="section-title">Project Objective</div><ul class="info-list">${p.objectives.map(o=>`<li>${o}</li>`).join('')}</ul></div>
                            <div class="info-section"><div class="section-title">Key Benefits</div><ul class="info-list">${p.benefits.map(b=>`<li>${b}</li>`).join('')}</ul></div>
                        </div>
                    </div>
                `;
                rig.insertBefore(div, document.getElementById('outro'));

                const posterDiv = document.createElement('div');
                posterDiv.className = 'showcase-poster-item';
                posterDiv.innerHTML = `<img src="${p.img}">`;
                posterCarousel.appendChild(posterDiv);
            });

            setTimeout(() => {
                const btn = document.getElementById('start-btn');
                btn.disabled = false; btn.innerText = "INITIALIZE SYSTEM";
            }, 2000);

            buildTimeline();
        }

        function buildTimeline() {
            const drawStage = document.getElementById('draw-stage');
            const track = document.getElementById('num-track');
            const lockBracket = document.getElementById('lock-bracket');
            
            // Get precise item height
            const counter = document.querySelector('.center-counter');
            const itemHeight = counter.offsetHeight || 250;

            projects.forEach((p, i) => {
                const label = `project_${i}`;
                masterTl.addLabel(label);

                masterTl.add(() => {
                    currentProjectIndex = i;
                    document.getElementById('status-text').innerText = `SYSTEM: SCANNING_NODE_0${p.id}`;
                    document.getElementById('box-l').innerHTML = `<div class="img-wrapper"><div class="scan-bar"></div><img src="${p.img}"><div class="side-label">FILE_0${p.id}_L</div></div>`;
                    document.getElementById('box-r').innerHTML = `<div class="img-wrapper"><div class="scan-bar"></div><img src="${p.img}"><div class="side-label">FILE_0${p.id}_R</div></div>`;
                    gsap.set(lockBracket, { opacity: 0, scale: 1.5 });
                });

                masterTl.set(drawStage, { autoAlpha: 1 });
                masterTl.fromTo(drawStage, { autoAlpha: 0, scale: 0.8 }, { autoAlpha: 1, scale: 1, duration: 0.6, ease: "power2.out" });
                
                // Rotation Loop Target
                const targetPos = (projects.length * 8) + i; 
                
                masterTl.add(() => { 
                    sfx.spin.play(); 
                    gsap.set(track, { filter: 'blur(8px)' }); // Motion Blur ON
                }, "-=0.3");

                masterTl.fromTo(track, 
                    { y: -((targetPos - 5) * itemHeight) }, 
                    { 
                        y: -(targetPos * itemHeight), 
                        duration: 3, 
                        ease: "expo.inOut",
                        onUpdate: function() {
                            // Subtle shake during high velocity
                            if (this.progress() > 0.2 && this.progress() < 0.8) {
                                gsap.set(drawStage, { x: Math.random()*2-1, y: Math.random()*2-1 });
                            } else {
                                gsap.set(drawStage, { x: 0, y: 0 });
                            }
                        }
                    }, "-=0.2"
                );
                
                masterTl.add(() => { 
                    sfx.spin.pause(); sfx.spin.currentTime = 0; 
                    sfx.impact.play(); 
                    gsap.set(track, { filter: 'blur(0px)' }); // Motion Blur OFF
                    gsap.fromTo("#flash", {opacity: 0.5}, {opacity:0, duration:0.4}); 
                    
                    // Lock Target Effect
                    gsap.to(lockBracket, { opacity: 1, scale: 1, duration: 0.3, ease: "back.out(2)" });
                    gsap.to(lockBracket, { scale: 1.05, repeat: 3, yoyo: true, duration: 0.1 });
                });

                const scene = document.getElementById(`scene-${p.id}`);
                masterTl.to(drawStage, { autoAlpha: 0, duration: 0.5, scale: 1.2 }, "+=0.6");
                masterTl.fromTo(scene, { autoAlpha: 0, scale: 0.9, y: 60 }, { autoAlpha: 1, scale: 1, y: 0, duration: 0.8, ease: "power3.out" });
                
                const sections = scene.querySelectorAll('.info-section');
                masterTl.to(sections, { opacity: 1, x: 0, stagger: 0.15, duration: 0.7 }, "-=0.5");

                masterTl.to({}, { duration: 8 }); // View time
                masterTl.to(scene, { autoAlpha: 0, duration: 0.6, filter: "blur(15px)" });
            });

            // Final Showcase
            masterTl.addLabel("showcase");
            const posterShowcase = document.getElementById('poster-showcase');
            const posterContainer = document.getElementById('poster-carousel-container');
            masterTl.to(posterShowcase, { autoAlpha: 1, duration: 1 });
            masterTl.to(posterContainer, { x: -4500, duration: projects.length * 5, ease: "none" });
            masterTl.to(posterShowcase, { autoAlpha: 0, duration: 1 });

            // Outro
            masterTl.addLabel("outro");
            masterTl.to("#outro", { autoAlpha: 1, duration: 1.5 });
            
            masterTl.eventCallback("onUpdate", () => {
                const time = masterTl.time();
                document.getElementById('hud-timer').innerText = `CLK_${Math.floor(time).toString().padStart(4, '0')}:UTC`;
            });
            masterTl.eventCallback("onComplete", () => { masterTl.play(0); });
        }

        function navNext() {
            const nextIdx = (currentProjectIndex + 1) % projects.length;
            masterTl.play(`project_${nextIdx}`);
        }

        function navPrev() {
            const prevIdx = (currentProjectIndex - 1 + projects.length) % projects.length;
            masterTl.play(`project_${prevIdx}`);
        }

        document.getElementById('start-btn').addEventListener('click', () => {
            gsap.to("#start-screen", { opacity: 0, duration: 1, onComplete: () => {
                document.getElementById('start-screen').remove();
                bgmAudio.play();
                masterTl.play();
            }});
        });

        window.onload = init;
    </script>
</body>
</html>
